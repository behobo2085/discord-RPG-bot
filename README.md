# Discord RPG 機器人

這是一個基於 Discord.js v14 的 RPG 遊戲機器人，提供完整的角色扮演遊戲體驗。機器人使用模組化設計，便於維護和擴展。

## 功能特點

- **角色系統**：創建和管理角色，支持多種職業選擇
- **探索系統**：探索不同地區，遭遇隨機事件和怪物
- **戰鬥系統**：即時戰鬥系統，包含普通攻擊和技能
- **商店系統**：購買武器、防具和消耗品
- **背包系統**：管理物品、裝備和使用物品
- **冒險者公會**：休息恢復狀態和製作裝備
- **狀態系統**：查看角色屬性和進度
- **響應式UI**：美觀的按鈕和互動介面

## 安裝與設置

1. 確保已安裝 Node.js 16.9.0 或更高版本
2. 克隆此存儲庫
3. 安裝依賴：
   ```bash
   npm install
   ```
4. 複製 `config.example.json` 為 `config.json` 並填入您的 Discord 機器人令牌
5. 啟動機器人：
   ```bash
   node main.js
   ```

## 項目結構

```
RPGBOT/
├── main.js                # 主入口文件
├── config.json            # 配置文件
├── data/                  # 玩家數據存儲
│   └── players.json       
├── modules/               # 功能模組
│   ├── battle.js          # 戰鬥系統核心
│   ├── battleHandler.js   # 戰鬥互動處理
│   ├── buttons.js         # 按鈕組件創建
│   ├── character.js       # 角色創建與管理
│   ├── commands.js        # 斜線指令處理
│   ├── data.js            # 數據存儲與加載
│   ├── exploration.js     # 探索系統
│   ├── guild.js           # 冒險者公會功能
│   ├── interactions.js    # 按鈕和選單互動
│   ├── inventory.js       # 背包系統
│   ├── items.js           # 物品定義
│   ├── mobs.js            # 怪物定義
│   ├── shop.js            # 商店系統
│   ├── shopHandler.js     # 商店互動處理
│   └── status.js          # 角色狀態顯示
└── README.md              # 項目文檔
```

## 遊戲指令

### 主要指令
- `/rpg` - 開始遊戲或顯示主選單

### 主選單功能
- 🌍 探索 - 開始探索冒險
- 🏪 商店 - 購買裝備和物品
- 🎒 背包 - 查看和管理物品
- 📊 角色狀態 - 查看角色屬性和裝備
- 🏛️ 冒險者公會 - 休息和製作裝備

### 戰鬥指令
- ⚔️ 攻擊 - 進行普通攻擊
- ✨ 技能 - 使用職業技能
- 🧪 使用物品 - 使用背包中的物品
- 🏃 逃跑 - 嘗試逃離戰鬥

## 開發指南

### 添加新物品
1. 在 `modules/items.js` 中添加新物品定義
2. 更新相應的商店或掉落表

### 添加新地圖
1. 在 `modules/exploration.js` 中添加新地區定義
2. 設置適當的怪物生成表和掉落

### 添加新功能
1. 創建新的模組文件
2. 在 `main.js` 中導入並註冊事件監聽器
3. 更新互動處理邏輯

## 貢獻

歡迎提交 Pull Request 或報告問題。請確保代碼風格一致並通過測試。

### modules/data.js

負責玩家數據的讀取和保存，提供數據操作接口。

### modules/player.js

定義玩家類和屬性，包括生產資源和技能等級。

### modules/buttons.js

創建各種按鈕和選單組件，供其他模組使用。

### modules/commands.js

處理斜線指令，主要是 `/rpg` 指令的處理。

### modules/interactions.js

處理按鈕和選單互動，分發到相應的處理函數。

### modules/character.js

處理角色創建和職業選擇。

### modules/exploration.js

處理探索系統，包括地區選擇和探索結果。

### modules/battle.js

戰鬥系統核心類，定義戰鬥邏輯。

### modules/battleHandler.js

處理戰鬥相關的互動，如攻擊、使用技能和物品。

### modules/shop.js

處理商店系統，包括商品展示和購買。

### modules/inventory.js

處理背包系統，包括物品管理和使用。

### modules/status.js

處理角色狀態顯示。

### modules/guild.js

處理冒險者公會功能，包括休息、生產活動和製作裝備。

## 新增功能：冒險者公會

冒險者公會提供以下功能：

1. **休息**：花費 30 金幣完全恢復 HP 和 MP
2. **生產活動**：
   - **種田**：獲取農作物和藥草，提升農業技能
   - **挖礦**：獲取礦石和金幣，提升採礦技能
   - **釣魚**：獲取魚，提升釣魚技能
3. **製作裝備**：使用收集的資源製作武器、防具和藥水

## 安裝和運行

1. 安裝依賴：
```bash
npm install
```

2. 設置 `config.json`：
```json
{
  "token": "你的Discord機器人令牌"
}
```

3. 運行機器人：
```bash
node main.js
```

## 使用方法

1. 邀請機器人到你的 Discord 伺服器
2. 使用 `/rpg` 指令開始遊戲
3. 按照按鈕和選單提示進行遊戲

## 注意事項

- 玩家數據每 5 分鐘自動保存一次
- 生產活動有冷卻時間限制
- 製作裝備需要特定數量的資源

## 未來計劃

- 添加更多地區和怪物
- 實現隊伍系統
- 添加任務系統
- 添加更多生產和製作選項

## 貢獻

歡迎提交問題和改進建議！
